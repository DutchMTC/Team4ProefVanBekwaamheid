**I. Core Gameplay Loop & Phases:**
    1.  **Sequence:** Implement a strict turn-based loop: Match3 Phase -> Player RPG Phase -> Enemy Phase -> (Repeat).
    2.  **Match3 Phase:**
        *   Player makes matches on the Match3 grid.
        *   Each match contributes charge to the Player's PowerUps.
        *   **Enemy Intent Indicator:** At the very start of this phase, display clear visual indicators revealing the specific PowerUp(s) the Enemy AI has randomly pre-selected to use in the upcoming Enemy Phase.
        *   Phase ends when the player initiates the Player RPG Phase (e.g., by choosing to use a PowerUp or ending their match turn).
    3.  **Player RPG Phase:**
        *   Player may choose to activate ONE available charged or supercharged PowerUp.
        *   If Move, Wall, or Attack is selected:
            *   Transition the camera smoothly to a zoomed-in, top-down perspective of the relevant grid/area.
            *   Clearly highlight valid target tiles/areas for the action (e.g., distinct color overlay with a dot marker). Player selects a target to execute.
        *   Phase ends after the player uses a PowerUp or chooses to skip their action, transitioning to the Enemy Phase.
    4.  **Enemy Phase:**
        *   The Enemy AI attempts to use the PowerUp(s) revealed by the Intent Indicator at the start of the preceding Match3 phase. Usage depends on the AI having sufficient charge for the action(s).
        *   Apply the effects of the enemy's actions.
        *   Phase ends after the enemy completes its actions, transitioning back to the Match3 Phase.
    5.  **End Condition:** The game loop terminates, and the game ends if either Player HP <= 0 or Enemy HP <= 0.

**II. Player & Enemy Stats:**
    1.  **Health:** Both Player and Enemy start with exactly 30 HP.
    2.  **Health Indicators:** Implement visible health indicators (e.g., bars, numbers) positioned above both Player and Enemy representations, accurately reflecting current HP.

**III. PowerUp System:**
    1.  **Types:** Implement four distinct PowerUps usable by both Player and Enemy: Move, Wall, Attack, Defend.
    2.  **Charging Mechanism:**
        *   **Charged:** Requires accumulating 15 block matches.
        *   **Supercharged:** Requires accumulating an additional 10 block matches (total 25 matches from empty).
        *   Implement UI indicators clearly showing the current charge level (none, charged, supercharged) for each of the Player's four PowerUps.
    3.  **Effects (Define basic functionality):**
        *   **Attack:** Deals damage to the opponent. Supercharged deals significantly more damage.
        *   **Defend:** Reduces damage taken during the opponent's next turn. Supercharged provides greater damage reduction.
        *   **Move:** Allows the user to reposition their entity on a relevant grid/map to a highlighted valid tile. Supercharged allows enhanced movement (e.g., greater distance).
        *   **Wall:** Places a temporary obstacle on a highlighted valid tile. Supercharged creates a more potent/durable wall.

**IV. Enemy AI:**
    1.  **Action Selection:** At the start of each Match3 phase (before the player makes any matches), the AI must randomly select which PowerUp(s) it *intends* to use during its *next* Enemy Phase. This selection is immediately displayed via the Enemy Intent Indicator.
    2.  **Action Execution:** During the Enemy Phase, the AI executes the pre-selected PowerUp(s) *only if* it possesses the required charge level (Charged or Supercharged). Assume a simplified charge accumulation method for the enemy for this prototype (e.g., gains charge passively per turn or per player match).
    3.  **Supercharged Attack:** The Enemy AI is capable of using a Supercharged Attack if Attack was its selected action and it has accumulated the necessary 25 matches/charge units.
    4.  **Targeting:** Enemy attacks target the Player. Basic logic should govern Move/Wall placement (e.g., move towards/away, place wall defensively).